<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta charset="utf-8">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <meta property="og:image" content="/public/apple-touch-icon-144-precomposed.png" />

  <title>
    
      Doohyun Kim &middot; Blog
    
  </title>
  <!-- meta -->
  <!-- <link rel="author" href="https://plus.google.com/u/0/+sglee"/>
  <meta name="description" content="Developer Blog">
  <meta name="naver-site-verification" content="589ef55a64f45cb4651dbf19ef610ca67fa3bdab"/> -->

  <!-- CSS theme -->
  <!-- <link rel="stylesheet"  href="/css/poole.css"> -->
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <!-- CSS custom -->
  <link rel="stylesheet" href="/css/style.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">

  <!-- Google Analytics Tag -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-47572822-3', 'auto');
    ga('send', 'pageview');

  </script>

</head>


  <body>

    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <!-- <label for="sidebar-checkbox" class="sidebar-toggle"></label> -->

          <h3 class="masthead-title">
            <a href="/" title="Home">Doohyun Kim</a>
            <!-- <small>Blog</small> -->
          </h3>
          <div class="search-box">
            <form action="/search" method="get">
              <input type="text" id="search-box" name="query" placeholder="search">
            </form>
          </div>
          <div class="pull-right category-box">
            <a href="/about" class="category-menu"><small>ABOUT</small></a>
            <!-- <a href="/categories/dev" class="category-menu"><small>DEV</small></a> -->
            <!-- <a href="/categories/biz" class="category-menu"><small>BIZ</small></a> -->
            <a href="/categories/algorithm" class="category-menu"><small>ALROGITHM</small></a>
            <a href="/categories/dbms" class="category-menu"><small>DBMS</small></a>
            <a href="/categories/server" class="category-menu"><small>SERVER</small></a>
            <a href="/categories/frontend" class="category-menu"><small>FRONTEND</small></a>
            <a href="/categories/backend" class="category-menu"><small>BACKEND</small></a>
            <a href="/categories/personal" class="category-menu"><small>PERSONAL</small></a>
          </div>
        </div>
      </div>

      <div class="container content">
        <!-- 
<div class="gdn-ads">
  <div class="gdn-ads-title">Advertisement</div>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  <ins class="adsbygoogle"
       style="display:inline-block;width:728px;height:90px"
       data-ad-client="ca-pub-2507125479501117"
       data-ad-slot="3337591636"></ins>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>
 -->




  <div class="posts post-list">
    <div class="category">
      <a href="/categories/alrorithm">ALRORITHM</a>
    </div>
    
  </div>

  <div class="posts post-list">
    <div class="category">
      <a href="/categories/dbms">DBMS</a>
    </div>
    
      <div class="post">
        <h5 class="post-title">
          <a href="/dbms/oracle/2018/12/03/materialized_view/">
            [Oracle] Materialized View의 Exception ( ORA-12034 )
          </a>
        </h5>
        <div class="post-description">
          <!-- <a href="/categories/dbms/#oracle">
            <span class="post-category">oracle</span>
          </a> -->
          <small class="post-date">Dec 03, 18</small>
        </div>
        <!-- <p>일단 Materialized View에 대하여 짧게 언급하고 지나가겠습니다.
Materialized View는 일반 View와는 다르게, 물리적인 데이터를 실제로 가지고 있는 View입니다.
일반적으로 우리가 생각하고 있는 View는 물리적으로 존재하는 데이터가 아닙니다. 하나 이상의 테이블의 결과를 논리적인 형태로 풀어놓은 것에 불과한 것이죠.
다만, 쿼리의 사용 양, 매번 Select해 오기에는 부하가 클 경우 실제 데이터로 만들어, 이를 사용하도록 하는 것을 Materialized View 라 합니다. 이것에 대한 갱신 주기, 방식 등등을 정하여 좀 더 쾌적한 사용을 할 수 있도록 해 주는데 있습니다.
좀 더 상세한 설명은 http://www.gurubee.net/lecture/1857 를 참조하시면 될 듯 싶습니다.
(차후 업데이트 예정)
—
현 운영 중인 곳에서 구체화된 뷰 에서 자동으로 새로고침이 되지 못하는 문제가 발생하였습니다.
현재 운영중인 Database에서는 특정 시간별로 FAST 방식을 통해 일정 시간마다 새로 고침을 해 주고 있는데요.</p>

<p><img src="https://user-images.githubusercontent.com/42507943/55311240-59850800-549d-11e9-80b2-12d69fb0c22b.png" alt="image" /></p>

<p>모종의 이유로  로그의 timeline이 꼬였다고 하고 있는데.</p>

<p><img src="https://user-images.githubusercontent.com/42507943/55311337-9bae4980-549d-11e9-9980-2c38aeca40d5.png" alt="image" /></p>

<p>현재 사이트는 Fast 방식으로 운영하고 있습니다.
 새로 고침을 스케줄링과 관련없이 새롭게 시작하려고 하니</p>

<p><img src="https://user-images.githubusercontent.com/42507943/55311343-9fda6700-549d-11e9-87bf-aee188dce64b.png" alt="image" /></p>

<p>한글화가 되어 있지만, 내용상 보았을 떄 Fast와 Complete 옵션만 적용 한 것으로 나와 있습니다.
FAST로는 해당 증상의 해결이 어렵습니다.
( Timeline이 꼬여있기 떄문에, Fast 옵션으로는 해당증상을 해결할 수 없다. 변경된 일부만 시도되기 때문에.)
Complete로 다시 돌린 후 원래대로 Fast로 돌아가도록 해 둡니다.</p>

<p>stack overflow에서”Complete Refresh” means you truncate entire materialized view and insert new data. 라는 표현을 사용하는데, 이보다 적절한 한글말을 찾지 못해 본문 그대로 인용합니다.
Fast 방법이 문제가 생길 수 있는 환경이라면 Fast + 실패시 Complete로 돌 수 있는 Force로 설정해 두는 것도 좋은 방법입니다. ( 문제가 되었던 곳은 개발서버 쪽이였기 때문에, 증상 확인을 위해 그대로 Fast로 사용하고 있습니다.)</p>

<p>참조한 곳들.
http://www.gurubee.net/lecture/1857
https://stackoverflow.com/questions/41465445/what-is-the-difference-between-complete-refresh-and-fast-refresh-in-materialized
https://docs.oracle.com/database/121/DWHSG/basicmv.htm#DWHSG-GUID-A7AE8E5D-68A5-4519-81EB-252EAAF0ADFF</p>
 -->
      </div>
    
  </div>

  <div class="posts post-list">
    <div class="category">
      <a href="/categories/frontend">FRONTEND</a>
    </div>
    
      <div class="post">
        <h5 class="post-title">
          <a href="/frontend/javascript/2019/05/21/javascript-closure/">
            JavaScript Closure의 실 사용으로 보는 의미 ( 클로저 사용법 )
          </a>
        </h5>
        <div class="post-description">
          <!-- <a href="/categories/frontend/#javascript">
            <span class="post-category">javascript</span>
          </a> -->
          <small class="post-date">May 21, 19</small>
        </div>
        <!-- <p>클로저의 설명으로 내부함수가 외부 함수의 맥락에 접근 할 수 있는 것을 가르킨다고 많이들 설명한다.
하지만 단지 그 설명만으로 개인적으로 처음 클로저를 이해하는데 의아한 점이 많았으며, 좀 더 본인에게 와 닿는 설명을 위해 작성한다. ( 또한 내가 잊지 않기 위해)</p>

<p>아, 클로저라는 것이 그럴수도 있겠구나라고 생각은 들지만, 그래서 클로저를 왜 쓰고, 중요하며 어디에 좋은데? 라고 설명하기에는 너무 기능적인 측면에서 설명하지 않았나 싶다.</p>

<p>물론 결과적으로 하는 말이 다르지 않지만,  내부가 외부의 접근이 아니라 조금 다르게 표현을 해 보자.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">makeAdder</span><span class="p">(</span><span class="nx">x</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
 	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`X value = </span><span class="p">${</span><span class="nx">x</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">z</span><span class="p">){</span>
    <span class="nx">y</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">x</span><span class="o">+</span><span class="nx">y</span><span class="o">+</span><span class="nx">z</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">add5</span> <span class="o">=</span> <span class="nx">makeAdder</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">add10</span> <span class="o">=</span> <span class="nx">makeAdder</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="c1">//클로저에 x와 y의 환경이 저장됨</span>

<span class="c1">/// add5의 정의는 다음과 같이 되는 것이다.</span>
<span class="c1">// function(z){</span>
<span class="c1">// y = 100;</span>
<span class="c1">// //x 는 숨겨져 나타나지 앖음</span>
<span class="c1">//	return x + y + z;</span>
<span class="c1">// }</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">add5</span><span class="p">(</span><span class="mi">2</span><span class="p">));</span>  <span class="c1">// 107 (x:5 + y:100 + z:2)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">add10</span><span class="p">(</span><span class="mi">2</span><span class="p">));</span> <span class="c1">// 112 (x:10 + y:100 + z:2)</span>
<span class="c1">//함수 실행 시 클로저에 저장된 x, y값에 접근하여 값을 계산</span>

</code></pre></div></div>

<p>위와 같은 상황에서 makeAdder(5) 의 리턴인 add5는 function(z) 를 가지고 있는 것이다. 다만! 이 와중에 외부 함수의 scope가 죽지 않고 살아 있는 것이며, 외부 함수에 접근할 수 있을 뿐이다. 정도면 되지 않을까.</p>

<p>그렇다면 설명이 조금 더 매끄럽게 이어질 수 있을 것 같다.</p>

<p>실용적으로 클로저는 다음과 같은 이점을 가질 수 있다.</p>

<ol>
  <li>외부에서 접근이 불가능한 private variable 의 접근 (get method 처럼) 사용할 수 있다.</li>
  <li>data를 control 하는 method를 연동시키기 좋다.</li>
</ol>

<p>1 에 대한 것은… java의 encapsulation 개념을 보는 게 더 명확하게 이해 할 수 있고
2 에 대한 예제는 MDN을 그대로 따 왔다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">makeSizer</span><span class="p">(</span><span class="nx">size</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">fontSize</span> <span class="o">=</span> <span class="nx">size</span> <span class="o">+</span> <span class="s1">'px'</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">size12</span> <span class="o">=</span> <span class="nx">makeSizer</span><span class="p">(</span><span class="mi">12</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">size14</span> <span class="o">=</span> <span class="nx">makeSizer</span><span class="p">(</span><span class="mi">14</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">size16</span> <span class="o">=</span> <span class="nx">makeSizer</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'size-12'</span><span class="p">).</span><span class="nx">onclick</span> <span class="o">=</span> <span class="nx">size12</span><span class="p">;</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'size-14'</span><span class="p">).</span><span class="nx">onclick</span> <span class="o">=</span> <span class="nx">size14</span><span class="p">;</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'size-16'</span><span class="p">).</span><span class="nx">onclick</span> <span class="o">=</span> <span class="nx">size16</span><span class="p">;</span>
</code></pre></div></div>

<p>끝</p>

<p>출처 https://developer.mozilla.org/ko/docs/Web/JavaScript/Guide/Closures</p>
 -->
      </div>
    
      <div class="post">
        <h5 class="post-title">
          <a href="/frontend/react/2019/04/21/react_fragment/">
            React Fragment와 div
          </a>
        </h5>
        <div class="post-description">
          <!-- <a href="/categories/frontend/#react">
            <span class="post-category">react</span>
          </a> -->
          <small class="post-date">Apr 21, 19</small>
        </div>
        <!-- <p>React Fragment와 div</p>

<p>Code들을 보게 되면 가끔 다음과 같은 것들을 볼 수 있을 것입니다.</p>

<div class="language-react highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">AppContainer</span> <span class="o">=</span> <span class="p">({</span><span class="nx">data</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
	<span class="p">&lt;</span><span class="nc">React</span><span class="p">.</span><span class="nc">Fragment</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">ChildA</span> <span class="p">/&gt;</span>
      <span class="p">&lt;</span><span class="nc">ChildB</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">React</span><span class="p">.</span><span class="nc">Fragment</span><span class="p">&gt;</span>
<span class="p">)</span>
</code></pre></div></div>

<p>이 이유는 하나만 리턴이 가능한 특성에서, 여러 값을 불필요한 div로 묶지 않고 해결 하기 위해 나온 방법입니다.</p>

<p>Fragment없이 구현을 하려면 다음과 같이 구현해야 하는데.</p>

<div class="language-react highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Columns</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>World<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>이 이유는 하나만 리턴이 되려면 무언가로 묶어야 하는데, 이 경우 Column을 각각 사용하거나, 혹은 위와 같이 하나의 div로 묶어야만 합니다.</p>

<p>발생할 수 있는 문제는</p>

<div class="language-react highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Table</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nc">Columns</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>가 render 된다면 tr 아래 td가 아닌 div가 들어가기 때문입니다.</p>

<div class="language-react highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">table</span><span class="o">&gt;</span>
  <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>World<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="err">/</span><span class="nt">table</span><span class="p">&gt;</span>
</code></pre></div></div>

<ul>
  <li>다음과 같이 output이 뽑혀져 나오면 당황스럽겟죠.</li>
</ul>

<p>PS. 그리고 지금은 다음과 같은 것들도 지원을 한다고 합니다!</p>

<div class="language-react highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Columns</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="p">&lt;&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Hello<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>World<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;/&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="err">출처</span> <span class="p">:</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//reactjs.org/docs/fragments.html#short-syntax</span>
</code></pre></div></div>

<p>출처 : <a href="https://reactjs.org/docs/fragments.html">https://reactjs.org/docs/fragments.html</a></p>

 -->
      </div>
    
  </div>

  <div class="posts post-list">
    <div class="category">
      <a href="/categories/backend">BACKEND</a>
    </div>
    
      <div class="post">
        <h5 class="post-title">
          <a href="/backend/spring/2019/07/29/autowired-qualifier-primary/">
            의존성 주입과 그 선택 ( @Autowired, @Primary, @Qualifier )
          </a>
        </h5>
        <div class="post-description">
          <!-- <a href="/categories/backend/#spring">
            <span class="post-category">spring</span>
          </a> -->
          <small class="post-date">Jul 29, 19</small>
        </div>
        <!-- <p>의존성 주입과 그 선택 ( Autowired, Primary, Qualifier )</p>

<p>@Autowired</p>

<p>스틱 자동차 대신 자동 변속 기어 자동차가 그러하듯이 자동은 언제나 편리하다. Autowired라는 Spring의 속성 또한 그렇다.</p>

<p>직관적으로 이해를 하자면 Auto+ wired. 자동으로 연결 되었다는 것이다. Spring을 써 보지 않았더라도, Naming이 아무렇게나 이루어지지 않았다는 걸 알았을 경우에는 자동 연결을 해줄 것이라는 것을 유추할 수 있게 된다.</p>

<p>개발 지식을 쌓으며 제일 중요한 것은 공식 문서를 보는 것이다.
재밌는 것은 google.co.kr에 @Autowired를 치면 첫 페이지에 Spring 공식 문서가 나오지 않는다. ( 문서를 보려고 굳이 뒤에 documentation을 추가 하였다.) 개인적으로 이 글을 읽는 분들이라도 항상 공식 doc을 보는 것을 추천한다. 물론 나도 블로그 글들을 자주 보고 정보를 빠르게 습득 하기 위해 이용하기는 하지만, doc이 있는 경우에는 항상 doc을 읽으려고 한다. 블로그의 정리 글은 빠르게 개념을 잡기 위함, 혹은 특정 상황에서 truble shooting을 할 때 좀 더 유용한 역할을 해 줄 수 있다.</p>

<p>돌아가서. 그럼 Autowired는 무엇인가, container autowires all beans matching the declared value type, 컨테이너는 선언되어 매칭되는 모든 Bean들을 autowired시켜준다.</p>

<p>optional한 element로는 required 를 boolean type으로 사용할 수 있다.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Modifier and Type</th>
      <th style="text-align: left">Optional Element and Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">boolean</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">required</code>Declares whether the annotated dependency is required.</td>
    </tr>
  </tbody>
</table>

<p>(출처 : 공식 doc)</p>

<p>하지만 Autowired를 사용하며 혼란이 있을 수 있으니, 이는 여러 candidate가 있을 때 이다.
이럴 때에는 @Bean에 @Primary를 사용함으로, 특정 bean에 높은 우선 순위를 부여할 수 있다. ( 하단과 같을 경우 first가 될 것이다.)</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MovieConfiguration</span> <span class="o">{</span>

    <span class="nd">@Bean</span>
    <span class="nd">@Primary</span>
    <span class="kd">public</span> <span class="n">MovieCatalog</span> <span class="nf">firstMovieCatalog</span><span class="o">()</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">MovieCatalog</span> <span class="nf">secondMovieCatalog</span><span class="o">()</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>

    <span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<p>그러고보니, 잠깐, Autowired 공식 문서의 See also 탭에 <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/annotation/AutowiredAnnotationBeanPostProcessor.html"><code class="highlighter-rouge">AutowiredAnnotationBeanPostProcessor</code></a> <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/annotation/Qualifier.html"><code class="highlighter-rouge">Qualifier</code></a> 와 같은 것들이 등장한다.</p>

<p>전자에 대해서는 나중에 다루도록 하고 @Qualifier의 경우에는 어찌 보면 Primary와 유사하다. 후보 Bean에 대하여 qualifiy 한다는 것이데 둘은 차이가 있다.</p>

<p>@Primary의 경우에는 우선 순위를 올리는 것이고, @Qualifier 의 경우에는 명확하게 규정, 혹은 한정을 한다는 것이다.</p>

<p>도움 받은 곳</p>

<p>백기선님의 인프런 강의, spring doc</p>

<p>https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-autowired-annotation-primary</p>

<p>https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/annotation/Autowired.html</p>

 -->
      </div>
    
      <div class="post">
        <h5 class="post-title">
          <a href="/backend/spring/2019/07/19/componentscan/">
            ComponentScan에 대하여
          </a>
        </h5>
        <div class="post-description">
          <!-- <a href="/categories/backend/#spring">
            <span class="post-category">spring</span>
          </a> -->
          <small class="post-date">Jul 19, 19</small>
        </div>
        <!-- <p>들어가기 전에 : @SpringbootApplication anotation 안에도 있다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">.</span><span class="na">autoconfigure</span><span class="o">;</span>

<span class="nd">@Target</span><span class="o">({</span><span class="n">ElementType</span><span class="o">.</span><span class="na">TYPE</span><span class="o">})</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="n">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@Documented</span>
<span class="nd">@Inherited</span>
<span class="nd">@SpringBootConfiguration</span>
<span class="nd">@EnableAutoConfiguration</span>
<span class="nd">@ComponentScan</span><span class="o">(</span>
    <span class="n">excludeFilters</span> <span class="o">=</span> <span class="o">{</span><span class="nd">@Filter</span><span class="o">(</span>
    <span class="n">type</span> <span class="o">=</span> <span class="n">FilterType</span><span class="o">.</span><span class="na">CUSTOM</span><span class="o">,</span>
    <span class="n">classes</span> <span class="o">=</span> <span class="o">{</span><span class="n">TypeExcludeFilter</span><span class="o">.</span><span class="na">class</span><span class="o">}</span>
<span class="o">),</span> <span class="nd">@Filter</span><span class="o">(</span>
    <span class="n">type</span> <span class="o">=</span> <span class="n">FilterType</span><span class="o">.</span><span class="na">CUSTOM</span><span class="o">,</span>
    <span class="n">classes</span> <span class="o">=</span> <span class="o">{</span><span class="n">AutoConfigurationExcludeFilter</span><span class="o">.</span><span class="na">class</span><span class="o">}</span>
<span class="o">)}</span>
<span class="o">)</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="n">SpringBootApplication</span> <span class="o">{</span>
    
<span class="o">}</span>
</code></pre></div></div>

<p>@ComponentScan 의 경우 
@Component annotation이 포함되어 있는 것들을 Scan할 수 있다.
대표적인 예로 @Repository, @Service, @Controller 등이 있다.
(관련한 정보는 spring docs 참조)</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">basePackageClasses</span> <span class="o">=</span> <span class="n">DemoApplication</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="c1">//여기가 위치한 곳 부터</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ApplicationConfig</span> <span class="o">{</span>
	
    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">BookRepository</span> <span class="nf">bookRepository</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">BookRepository</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p>혹은 다음과 같이 직업 Config를 설정하여 사용할 수 있다.</p>

<p>작성자는 DemoApplication.class 라고 적어 놓았는데, 이는 DemoApplication이 위치한 Depth부터 탐색 하겠다는  뜻이다.</p>

<p>(추후 업데이트 가능성 있음. 개인 사정상 블로그를 잠깐 쉬게 되었어서 주기화를 위해 짧게나마 기록 해 놓습니다.)</p>

<p>출처 : https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/stereotype/Component.html
인프런 스프링프레임워크 핵심기술</p>
 -->
      </div>
    
      <div class="post">
        <h5 class="post-title">
          <a href="/backend/php/2019/06/17/slim-framework/">
            Slim Framework
          </a>
        </h5>
        <div class="post-description">
          <!-- <a href="/categories/backend/#php">
            <span class="post-category">php</span>
          </a> -->
          <small class="post-date">Jun 17, 19</small>
        </div>
        <!-- <p>Slim Framework 적용기 (간단한 Restful API을 PHP로 )</p>

<p><img src="https://user-images.githubusercontent.com/42507943/59740653-af4e9c80-92a3-11e9-874d-82f618f8ba81.png" alt="62697485-D98E-435E-88B6-0B19BE26EEEB" /></p>

<p>다음과 같은 형태로 Ajax 콜을 PHP로 관리 하고 있었다.</p>

<p>생각을 해 보니, 단순 콜 하나일 때는 상관이 없었으나, 여러개가 되고, 담당자가 변경이 된다고 하였을 때 유지보수나, 새로운 기능을 만든다고 생각을 했을 때 일관성을 유지하기가 힘들 것 같았다.</p>

<p>해당 부분을 Restful API로 개조하여 사용하기로 결정하고, 어떤 Framework을 사용하는 것이 좋을 지에 대하여 고려해 보았다.</p>

<p>고려한 점은 다음과 같다.</p>

<ol>
  <li>
    <p>적은 러닝 커브를 지닐 것 ( 즉 사용하는데 걸리는 시간이 적게 걸릴 것)</p>
  </li>
  <li>
    <p>어느정도 인정을 받은 Framework일 것</p>

    <p><a href="https://nordicapis.com/5-lightweight-php-frameworks-build-rest-apis/">참고1</a></p>

    <p><a href="https://www.slant.co/topics/6956/~php-frameworks-for-building-a-restful-api">참고2</a></p>

    <p>를 따라</p>
  </li>
</ol>

<p><strong>라라벨 ( Lalavel )</strong></p>

<ol>
  <li>본인을 비롯한 나머지 개발자 모두 라라벨을 사용한 적이 없어, 러닝 커브가 존재
(그렇다고 다른 서비스들에 라라벨을 추가로 사용할 것 같지도 않음)</li>
  <li>단순히 저 File Cache 기능하나만을 위해 라라벨을 공부해야 한다는 점이 시간대비 좋지 못함.</li>
  <li>다른 기능들을 사용할 예정이 전혀 없기 때문에 상대적으로 무겁다고 생각함.</li>
</ol>

<p>을 제외하고, 최종적으로 Slim을 선택하게 되었다.</p>

<p><a href="slimframework.com">Slim Framework</a> - a micro framework for php</p>

<p>Slim은 주용한 몇 가지 기능만 담은 매우 Simple한 Framework이다.</p>

<p>HttpRequest를 받고, 적절한 Callback 을 호출하여 HTTP Response를 리턴하는 데 그 의의가 있다.</p>

<p>이게 전부다!</p>

<p>Data를 Consume, 또는 변형(repurpose), publishing 하는데 목적을 두고 있으며, 빠르게 Prototype을 생성할 수 있다고 설명 되어 있다. 실제로도 매우 간단한 코드만으로도 구현이 가능하다.</p>

<p>가벼운 것이  제일 마음에 들었고, 사용법 또한 간단하다.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$app</span><span class="o">-&gt;</span><span class="na">group</span><span class="p">(</span><span class="s1">'/api-group'</span><span class="p">,</span><span class="k">function</span><span class="p">()</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$app</span><span class="p">){</span>

    <span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span><span class="k">function</span> <span class="p">(</span><span class="nv">$request</span><span class="p">,</span> <span class="nv">$response</span><span class="p">,</span> <span class="nv">$args</span><span class="p">){</span>
        <span class="nv">$params</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getQueryParams</span><span class="p">();</span>
        <span class="c1">/// 실 처리 부
</span>        <span class="k">return</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">write</span><span class="p">(</span><span class="s2">" write return "</span><span class="p">);</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
          <span class="nv">$failJson</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"result"</span><span class="o">=&gt;</span><span class="s2">"false"</span><span class="p">,</span><span class="s2">"message"</span><span class="o">=&gt;</span><span class="s2">"needed parameter -&gt; domain"</span><span class="p">);</span>
            <span class="k">return</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">write</span><span class="p">(</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$failJson</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">});</span>
       <span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'/all'</span><span class="p">,</span><span class="k">function</span> <span class="p">(</span><span class="nv">$request</span><span class="p">,</span> <span class="nv">$response</span><span class="p">,</span> <span class="nv">$args</span><span class="p">){</span>

        <span class="k">return</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">write</span><span class="p">(</span><span class="s2">" write return "</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">})</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$request</span><span class="p">,</span><span class="nv">$response</span><span class="p">,</span><span class="nv">$next</span><span class="p">){</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$next</span><span class="p">(</span><span class="nv">$request</span><span class="p">,</span> <span class="nv">$response</span><span class="p">);</span>
    <span class="k">return</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div></div>

<p>다음과 같이 api를 group 단위로 관리 할 수 있다. (  예제에는 get 하나로 된 것도 존재한다.)</p>

<p>다만 call이 많아질 경우를 대비하여 Group 단위로 콜을 관리 하면 좋을 듯 싶다.</p>
 -->
      </div>
    
      <div class="post">
        <h5 class="post-title">
          <a href="/backend/nodejs/2019/05/19/helmet-security/">
            helmet을 통한 보안 강화
          </a>
        </h5>
        <div class="post-description">
          <!-- <a href="/categories/backend/#nodejs">
            <span class="post-category">nodejs</span>
          </a> -->
          <small class="post-date">May 19, 19</small>
        </div>
        <!-- <p>Node를 사용하면서 Helmet을 통해 보안을 손쉽게 강화 할 수 있다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yarn add helmet 
</code></pre></div></div>

<p>(yarn을 더 좋아한다. (npm 보다는.))</p>

<p>​</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class App {
    public app: GraphQLServer;
    public pubSub: any;
    constructor(){
        this.pubSub = new PubSub;
        this.pubSub.ee.setMaxListeners(99);
        this.app = new GraphQLServer({
            schema,
            context: req =&gt; {
                const {connection: {context = null} = {} } = req;
                return {
                    req: req.request,
                    pubSub: this.pubSub,
                    context
                }
            }
        });
        this.middlewares();
    }
    private middlewares = () : void =&gt; {
        this.app.express.use(cors());
        this.app.express.use(logger("dev"));
        this.app.express.use(helmet());
    };

}
</code></pre></div></div>

<p>다음과 같이 사용하면 되고, default로 제공 되는 것 은 다음과 같다.</p>

<p>default option</p>

<ul>
  <li><a href="https://helmetjs.github.io/docs/dns-prefetch-control">dnsPrefetchControl</a> controls browser DNS prefetching</li>
  <li><a href="https://helmetjs.github.io/docs/frameguard/">frameguard</a> to prevent clickjacking</li>
  <li><a href="https://helmetjs.github.io/docs/hide-powered-by">hidePoweredBy</a> to remove the X-Powered-By header</li>
  <li><a href="https://helmetjs.github.io/docs/hsts/">hsts</a> for HTTP Strict Transport Security</li>
  <li><a href="https://helmetjs.github.io/docs/ienoopen">ieNoOpen</a> sets X-Download-Options for IE8+</li>
  <li><a href="https://helmetjs.github.io/docs/dont-sniff-mimetype">noSniff</a> to keep clients from sniffing the MIME type</li>
  <li><a href="https://helmetjs.github.io/docs/xss-filter">xssFilter</a> adds some small XSS protections</li>
</ul>

<p>외에도 다양한 option들이 존재하며, 기본적으로 다음과 같은 것들을 지원한다.</p>

<p>하나씩 뜯어 보자면</p>

<p>​	dnsPrefetchControl : 브라우저에서 사용자가 링크를 클릭 or 리소스 로드 전 요청하기 전 사전에 DNS 요청을 시작할 수 있다. 이는 클릭 했을 때 성능을 향상시키나, 방문하지 않은 것을 방문하는 것 처럼 여길 수 있다.</p>

<p>​	frameguard : 원하지 않는 것을 클릭하는 것을 막는다.</p>

<p>​	hidePoweredBy : X-Powered-by를 통해 서버에 어떤 기술이 적용 되는지 나타낼 수 있으며, 이를 숨겨준다. 덤으로 원할 경우 다른 것에 의해 구동 되는 것 처럼 보이게 할 수도 있다.</p>

<p>​	hsts : Https 고정</p>

<p>​	ieNoOpen : 악성 HTML 다운로드가 Site Context에서 실행되는 것을 방지 할 수 있다.
​	The <code class="highlighter-rouge">X-Download-Options</code> header can be set to <code class="highlighter-rouge">noopen</code>. This will prevent old versions of Internet Explorer from allowing malicious HTML downloads to be executed in the context of your site.</p>

<p>​	noSniff : 확장자 변환 공격을 방지 ( .jpg라는 파일을 열라고 수행하지만 해당 내용이 실제 html이라거나..)</p>

<p>​	xssFilter : Xss 공격 방지</p>

<p>How it works 탭에 각각에 대한 설명이 더욱 더 자세하게 나와 있으니 참고 하였으면 한다.
(한가할 때 한 가지당 한 글로 정리해서 포스팅 해 보아야 겠다..)</p>

<p>출처 : https://www.npmjs.com/package/helmet</p>
 -->
      </div>
    
  </div>

<!-- <div class="pagination">
  
    <a class="pagination-item older" href="/page2">Older</a>
  
  
    <span class="pagination-item newer">Newer</span>
  
</div> -->
      </div>
    </div>
  </body>
</html>
